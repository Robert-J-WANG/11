<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        // 1. js的作用域：就是一个代码名字（变量）起作用的范围。目的是减少命名冲突，提高程序的可靠性
        // ————————————————————————————————————————————————————————————————————————
        // 2.js的作用域（es6)之前：分为全局作用域和局部作用域，现阶段没有块级作用域（了解一下，es6和其他语言中有块级作用域）
        // ————————————————————————————————————————————————————————————————————————
        //3.全局作用域：范围是整个script标签，或者是一个单独的js文件
        // ————————————————————————————————————————————————————————————————————————
        //4.局部作用域：范围是函数内部，又称函数作用域，相关代码只在函数内部起作用
        // ————————————————————————————————————————————————————————————————————————
        // ————————————————————————————————————————————————————————————————————————
        // ————————————————————————————————————————————————————————————————————————
        // var num = 10; ////此代码全局起作用
        // console.log(num);

        // function fn() {
        //     //     ////局部作用域
        //     var num = 20; ////此代码只在函数内部起作用
        //     console.log(num);
        // }
        // fn()
        // //   变量名一样，但不会冲突，因为作用域不同，结果会分别打印出10,20
        // ————————————————————————————————————————————————————————————————————————
        // ————————————————————————————————————————————————————————————————————————
        // 5。变量的作用域：根据作用域的不同，变量分为全局变量和局部变量
        // ————————————————————————————————————————————————————————————————————————

        // 6. 全局变量： 在全局作用域中都可以使用的变量
        // 注意：在函数内部没有申明，直接赋值的变量，也是全局变量
        // ————————————————————————————————————————————————————————————————————————

        var num = 10; ////变量num就是全局变量
        function fn() {
            console.log(num);
        }
        fn();
        //变量num能在全局使用，所以在函数内部也能使用，输出结果是10
        // ————————————————————————————————————————————————————————————————————————

        // 7. 局部变量:在函数作用域里的变量
        // 注意：函数的形参也是局部变量
        // ————————————————————————————————————————————————————————————————————————
        function fn1() {
            var num1 = 10; ////num1是局部变量
            num2 = 20; ////num2没有变量申明，直接赋值，他是全局变量
        }
        fn1();
        console.log(num1);
        //num1是局部变量，在全局作用域里不起作用，所以输出结果是undefined
        console.log(num2);
        // num2在函数作用域里没有变量申明，直接赋值，他则是全局变量，所以结果是20
        // ————————————————————————————————————————————————————————————————————————
        //8.全局变量和局部变量的执行效率；
        // 全局变量只有当浏览器关闭才会销毁，比较占内存资源
        // 局部变量当程序执行完毕就会销毁，比较节约内存资源
        // ————————————————————————————————————————————————————————————————————————
        //9.作用域链：如果函数中还有函数，那么这个函数作用域总又诞生一个新的函数作用域。内部函数访问外部函数的变量时，采取链式查找的方式来决定去哪个值。这种结构我们称为链式作用域。采用就近原则。
        // ————————————————————————————————————————————————————————————————————————
        var num = 10; ////全局作用域
        function fn() {
            var num = 20; ////外部函数作用域
            function fn1() {
                ////内部函数作用域
                console.log(num);
            }
            fn1()
        }
        fn();
        //根据就近原则，结果还是20
        // ————————————————————————————————————————————————————————————————————————
        // ————————————————————————————————————————————————————————————————————————
        // 10.作用域链练习
        // ————————————————————————————————————————————————————————————————————————
        // 练习1. 结果是？
        function f1() {
            var num = 123;

            function f2() {
                console.log(num); ////站在目标，一层一层往外查找
            }
            f2();
        }
        var num = 456;
        f1();
        ////结果是123
        // ————————————————————————————————————————————————————————————————————————

        // 练习2. 结果是？
        var a = 1;

        function fn1() {
            var a = 2;
            var b = '22';
            fn2();

            function fn2() {
                var a = 3;
                fn3();

                function fn3() {
                    var a = 4;
                    console.log(a);
                    console.log(b);
                }
            }
        }
        fn1();
        ////结果是4和22
    </script>
    <title>js的作用域</title>
</head>

<body>

</body>

</html>